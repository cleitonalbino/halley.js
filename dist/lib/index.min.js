(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("flickity")):"function"==typeof define&&define.amd?define(["exports","flickity"],b):b(a.index={},a.Flickity)})(this,function(a,b){'use strict';function c(a,b){if(null===a||a===void 0){throw new Error("Missing player object")}if(null===b.callback||"function"!=typeof b.callback){throw new Error("Missing the callback function")}this.player=a,this.trackValues=b.trackings||["0%","25%","50%","75%","100%"],this.callback=b.callback,this.trackList=[],this.videoTimer=null,this.setupTrackList()}function d(){const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";const b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}b=b&&b.hasOwnProperty("default")?b["default"]:b;var e={init:function(a,c){function d(){new b(e,c)}const e="string"==typeof a?document.querySelector(a):a;d()},initMany:function(a,c){const d=Array.from(document.querySelectorAll(a)),e=[];(function(){d.forEach(a=>{e.push(new b(a,c))})})()}},f={init:function(){(function(a){if(!window.createImageBitmap)return void a(!1);fetch("data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEAAQAcJaQAA3AA/v3AgAA=").then(a=>a.blob()).then(b=>{createImageBitmap(b).then(()=>{a(!0)},()=>{a(!1)})})})(a=>{a||document.body.classList.add("dont-support-webp")})}},g={init:function(a,b){function c(){document.body.style.overflow="",f.classList.remove("data-out"),f.classList.add("data-active"),g.onClose&&g.onClose()}function d(){c()}function e(){h&&h.addEventListener("click",d)}const f="string"==typeof a?document.querySelector(a):a,g=b||{},h=f.querySelector("[data-dialog-close]");return function(){e()}(),{open:function(){document.body.style.overflow="hidden",f.classList.remove("data-out"),f.classList.add("data-active"),g.onOpen&&g.onOpen()},close:c}}},h={init:function(){const a="string"==typeof selector?document.querySelector(selector):selector,b=a.querySelector("[data-dropdown-select]"),c=a.querySelector("[data-dropdown-label]");(function(){b.addEventListener("change",()=>{c.innerHTML=b.options[b.selectedIndex].innerHTML})})()}};c.prototype.setupTrackList=function(){for(var a=0,b=this.trackValues.length;a<b;a++)this.trackList[this.trackValues[a]]=!1},c.prototype.onVideoStateChange=function(a){switch(a){case YT.PlayerState.PLAYING:this.startVideoTimer();break;case YT.PlayerState.ENDED:this.verifyVideoTime(),this.stopVideoTimer();break;default:this.stopVideoTimer();}},c.prototype.startVideoTimer=function(){var a=this;this.videoTimer=setInterval(function(){a.verifyVideoTime()},1e3)},c.prototype.stopVideoTimer=function(){clearInterval(this.videoTimer)},c.prototype.verifyVideoTime=function(){var b,c,d,e,a=Math.round,f=0;b=this.player.getDuration(),c=a(this.player.getCurrentTime());for(var g=0,h=this.trackValues.length;g<h;g++)d=this.trackValues[g].substr(this.trackValues[g].length-1),e=this.trackValues[g].replace(/[a-z]/g,""),"p"===d?(f=a(100*c/b),f>=e&&!1===this.trackList[this.trackValues[g]]&&this.refreshTrackList(this.trackValues[g])):"s"===d&&c>=e&&!1===this.trackList[this.trackValues[g]]&&this.refreshTrackList(this.trackValues[g])},c.prototype.refreshTrackList=function(a){this.trackList[a]=!0,this.publish(a)},c.prototype.publish=function(a){this.callback&&"function"==typeof this.callback&&this.callback(a)};var i={init(a){window.onYouTubeIframeAPIReady=()=>a(),d()}},j={init:async function(a,b){function d(a){a.data===YT.PlayerState.PLAYING&&m.onStateChange&&m.onStateChange(),m.onTracking&&a.target.tracking.onVideoStateChange(a.data)}function e(a){const b=a;m.onPlayVideo&&m.onPlay(),m.onTracking&&(b.target.tracking=new c(b.target,{trackings:m.onTracking.trackings,callback:m.onTracking.callback}))}function f(){n=new YT.Player(o,{videoId:m.id,playerVars:m.playerVars,events:{onReady:a=>e(a),onStateChange:a=>d(a)}}),console.log(n)}function g(){m.onClose&&m.onClose(),n.stopVideo(),n.destroy(),n=null}function h(){n.playVideo()}function j(){l.innerHTML="",o=document.createElement("div"),l.appendChild(o)}function k(){j(),f(),m.automaticPlay&&h()}const l="string"==typeof a?document.querySelector(a):a,m=b||{};let n=null,o=null;return await function(){return new Promise(a=>{i.init(k),a()})}(),{istanceVideo:n,create:k,play:h,close:g}}},k={init:function(a){function b(){c.addEventListener("click",e.open)}const c="string"==typeof a.openButton?document.querySelector(a.openButton):a.openButton,d=d.init(a.video.elm,a.video.options),e=g.init(a.modal.elm,{onOpen:d.open,onClose:d.close});return function(){b()}(),{open:e.open,close:e.close}}};a.carousel=e,a.webpDetector=f,a.dialog=g,a.dropdown=h,a.video=j,a.videoModal=k,a.default={carousel:e,webpDetector:f,dialog:g,dropdown:h,video:j,videoModal:k},Object.defineProperty(a,"__esModule",{value:!0})});
